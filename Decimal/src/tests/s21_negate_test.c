#include "s21_test.h"

START_TEST(negate_test_1) {
  s21_decimal values[] = {
      {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  //                  0
      {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  //                  1
      {{0x00000001, 0x00000000, 0x00000000, 0x80000000}},  //                 -1
      {{0xCF5C048C, 0x004D2BEF, 0x00000000, 0x00070000}},  // 2172188218.2812812
      {{0xFEADBDA2, 0x000001FB, 0x00000000, 0x80060000}},  //    -2181821.218210
      {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x00000000}},
      //                                           79228162514264337593543950335
      {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x80000000}},
      //                                          -79228162514264337593543950335
      {{0x00000000, 0x00000000, 0x00000000, 0x00020000}},  //               0.00
      {{0x00000000, 0x00000000, 0x00000000, 0x80020000}},  //               0.00
      {{0x000F4240, 0x00000000, 0x00000000, 0x00020000}},  //           10000.00
      {{0x000F4240, 0x00000000, 0x00000000, 0x80020000}},  //          -10000.00
      {{0x00000467, 0x0000007A, 0x00000000, 0x00040000}},  //      52398601.1239
      {{0x00000467, 0x0000007A, 0x00000000, 0x80000000}},  //      -523986011239
      {{0x00000467, 0x0000007A, 0x00003215, 0x00010000}},
      //                                               23650570576955414727997.5
      {{0x00000467, 0x0000007A, 0x00205FF0, 0x80020000}},
      //                                            -391386782621189641642978.31
      {{0x000F4240, 0x00002710, 0x00002710, 0x80050000}}
      //                                              -1844674407800451901.20000
  };

  s21_decimal results[] = {
      {{0x00000000, 0x00000000, 0x00000000, 0x80000000}},  //                  0
      {{0x00000001, 0x00000000, 0x00000000, 0x80000000}},  //                 -1
      {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  //                  1
      {{0xCF5C048C, 0x004D2BEF, 0x00000000, 0x80070000}},  //-2172188218.2812812
      {{0xFEADBDA2, 0x000001FB, 0x00000000, 0x00060000}},  //     2181821.218210
      {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x80000000}},
      //                                           -79228162514264337593543950335
      {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x00000000}},
      //                                            79228162514264337593543950335
      {{0x00000000, 0x00000000, 0x00000000, 0x80020000}},  //               0.00
      {{0x00000000, 0x00000000, 0x00000000, 0x00020000}},  //               0.00
      {{0x000F4240, 0x00000000, 0x00000000, 0x80020000}},  //          -10000.00
      {{0x000F4240, 0x00000000, 0x00000000, 0x00020000}},  //           10000.00
      {{0x00000467, 0x0000007A, 0x00000000, 0x80040000}},  //     -52398601.1239
      {{0x00000467, 0x0000007A, 0x00000000, 0x00000000}},  //       523986011239
      {{0x00000467, 0x0000007A, 0x00003215, 0x80010000}},
      //                                              -23650570576955414727997.5
      {{0x00000467, 0x0000007A, 0x00205FF0, 0x00020000}},
      //                                             391386782621189641642978.31
      {{0x000F4240, 0x00002710, 0x00002710, 0x00050000}}
      //                                               1844674407800451901.20000
  };

  for (size_t i = 0; i < sizeof(values) / sizeof(s21_decimal); i++) {
    s21_decimal value = values[i];
    s21_decimal res;
    int ret = s21_negate(value, &res);
    ck_assert_int_eq(results[i].bits[0], res.bits[0]);
    ck_assert_int_eq(results[i].bits[1], res.bits[1]);
    ck_assert_int_eq(results[i].bits[2], res.bits[2]);
    ck_assert_int_eq(results[i].bits[3], res.bits[3]);
    ck_assert_int_eq(ret, FALSE);
  }
}
END_TEST

Suite* s21_negate_suite(void) {
  Suite* s;
  s = suite_create("\033[33ms21_negate\033[0m");

  TCase* tc_core;
  tc_core = tcase_create("s21_negate_core");
  tcase_add_test(tc_core, negate_test_1);
  suite_add_tcase(s, tc_core);

  return s;
}
